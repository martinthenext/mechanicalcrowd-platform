<!doctype html>
<html ng-app="CrudApp">

<head>

    <link href="vendor/css/bootstrap.min.css" rel="stylesheet">
     <link href="css/style.css" rel="stylesheet">
	

    <script src="vendor/js/angular.min.js"></script>



   <script src="vendor/js/angular-resource.min.js"></script>


    <script src="vendor/js/lodash.js"></script>
    <script src="vendor/js/xeditable.js"></script>
    
    <script src="js/app.js"></script>
</head>

<body ng-controller="MainCtrl">
	<div class="container">

		<h2>Table task</h2>

		
		<img src="img/spinner.gif" ng-hide="dataSet"/>
		
		<div ng-show="isFromMturk">
			<h3>Sorry, this page is supposed to be opened only from MTurk</h3>
		</div>

		<!-- sample data --> 
		<div ng-hide="hasAssignment">

			<h2>{{sampleData.upperText}}</h2>
			<div class="table-responsive">
				<table class="table table-striped" >
				  <th ng-repeat="header in sampleData.dataSet.table.headers">
				    	{{header}}
				  </th>
		
				  <th ng-show="canDelete">
				  </th>
			 		
				  
				  <tr ng-repeat="row in sampleData.dataSet.table.rows">
				    <td ng-repeat="cell in row">
				      <a href="#" editable-text="cell" onaftersave="canNotSave()">
				        {{cell}}
				      </a>
				    </td>
				   
				    <td ng-show="canDelete">

				        <button class="btn btn-danger" ng-click="canNotSave()">
				            <i class="glyphicon glyphicon-remove"></i>
				        </button>
				        
				    </td>
				  </tr>
				</table>
			</div>

		</div>

		<!-- real data -->
		
		<div ng-show="dataSet">

			<p>{{dataSet.upperText}}</p>
			<div class="table-responsive">
				<table class="table table-striped" >
				  <th ng-repeat="header in dataSet.table.headers">
				    	{{header}}
				  </th>
		
				  <th ng-show="canDelete">
				  </th>
			 		
				  
				  <tr ng-repeat="row in dataSet.table.rows">
				    <td ng-repeat="cell in row">
				      <a href="#" editable-text="cell" onaftersave="updateRow($index, $parent.$parent.$index, $parent.cell)">
				        {{cell || 'empty'}}
				      </a>
				    </td>
				   
				    <td ng-show="canDelete">

				        <button class="btn btn-danger" ng-click="deleteItem(row)">
				            <i class="glyphicon glyphicon-remove"></i>
				        </button>
				        
				    </td>
				  </tr>
				</table>
			</div>

			<p ng-bind-html="dataSet.lowerTask | to_trusted"></p>

			<div class="text-center">
				<button class="btn btn-primary" ng-click="sendAll()">Send your data</button>
			</div>

		</div>

		

	</div>
</body>

</html>